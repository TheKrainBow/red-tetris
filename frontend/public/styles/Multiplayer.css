/* Styles extracted from Multiplayer.js */
:root { --mp-band-h: 160px; }

.mp-root { position: relative; width: 100%; height: 100%; overflow: hidden; }

.mp-layer { position: absolute; left: 0; right: 0; }
.mp-dark {
  background-image: url('/ui/Dark_Dirt.webp');
  background-size: auto 480px;
  background-repeat: repeat;
  background-position: center;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  filter: brightness(1) saturate(1);
  top: 0; bottom: 0;
  z-index: 0;
}

.mp-top, .mp-footer-bg {
  pointer-events: none;
  height: var(--mp-band-h);
  left: 0; right: 0;
  background-image: url('/ui/Light_Dirt.webp');
  background-size: auto 420px;
  background-repeat: repeat;
  image-rendering: pixelated;
  image-rendering: crisp-edges;
  border-top: 2px solid rgba(0,0,0,1);
  border-bottom: 2px solid rgba(0,0,0,1);
  z-index: 3;
}
.mp-top { top: 0; bottom: auto; background-position: center top; }
.mp-footer-bg { bottom: 0; top: auto; background-position: center bottom; }

/* Global falling overlay above dark background, below bands and content */
.mp-global-fall { position: absolute; inset: 0; z-index: 2; pointer-events: none; overflow: hidden; }

.mp-sep-top, .mp-sep-bottom { position: absolute; left: 0; right: 0; pointer-events: none; z-index: 3; }
.mp-sep-top { top: var(--mp-band-h); height: 35px; background: linear-gradient(to bottom, rgba(0,0,0,0.9), rgba(0,0,0,0)); }
.mp-sep-bottom { bottom: var(--mp-band-h); height: 35px; background: linear-gradient(to top, rgba(0,0,0,0.9), rgba(0,0,0,0)); }

.mp-content { position: relative; height: 100%; display: flex; flex-direction: column; }
.mp-header { height: 140px; display: flex; align-items: flex-end; justify-content: center; position: relative; z-index: 4; }
.mp-title { color: #ffffff; margin: 0 0 12px 0; font-size: 20px; text-shadow: 2px 2px 0 #000; }

.mp-list-wrap {
  position: absolute; left: 0; right: 0; top: var(--mp-band-h); bottom: var(--mp-band-h);
  z-index: 4; /* ensure servers always on top of falling tetrominos */
  display: flex; justify-content: center; overflow-y: auto; overflow-x: hidden;
}
.mp-list { width: min(880px, 92vw); margin-top: 10px; margin-bottom: 10px; background: transparent; padding: 6px 0; }
.mp-row { display: flex; align-items: center; gap: 14px; padding: 10px 12px; cursor: pointer; }
.mp-row + .mp-row { border-top: 1px solid rgba(0,0,0,0.5); }
.mp-row:hover { background: rgba(255,255,255,0.05); }
.mp-row.selected { outline: 2px solid #c6a200; background: rgba(255,220,120,0.06); }

.mp-icon {
  width: 48px; height: 48px; border: 1px solid #000; border-radius: 6px;
  box-shadow: inset 1px 1px 0 rgba(255,255,255,0.35), inset -1px -1px 0 rgba(0,0,0,0.55);
  image-rendering: pixelated; flex: 0 0 48px; display: flex; align-items: center; justify-content: center;
  font-weight: 700; color: #111; background: #999;
}
.bg-green { background: #6c3 !important; }
.bg-orange { background: #f90 !important; }

.mp-info { display: flex; align-items: baseline; gap: 12px; flex: 1; }
.mp-col { flex: 1; }
.mp-name { color: #fff; font-size: 18px; text-shadow: 2px 2px 0 #000; }
.mp-count { margin-left: auto; color: #c0ffb4; text-shadow: 2px 2px 0 #000; }
.mp-players { margin-left: 74px; color: #ddd; font-size: 14px; text-shadow: 2px 2px 0 #000; }
/* Generic secondary line used by Singleplayer history (no icon) */
.mp-meta { color: #ddd; font-size: 14px; text-shadow: 2px 2px 0 #000; }

/* Mode-specific coloring for Singleplayer history */
.mp-mode { font-weight: 700; text-shadow: 2px 2px 0 #000; }
.mp-mode-singleplayer { color: #b2ffad; }
.mp-mode-pvp { color: #ff9a9a; }
.mp-mode-cooperation { color: #a9c9ff; }


.mp-footer { position: absolute; left: 0; right: 0; bottom: 0; height: var(--mp-band-h); display: flex; align-items: center; justify-content: center; gap: 14px; z-index: 4; }

/* Right-side modal (rounded), floats above 3D with margin around */
.shop-modal {
  position: absolute; top: 24px; right: 24px; bottom: 24px; width: min(680px, 50vw);
  background: rgba(28, 28, 28, 0.7);
  border: 2px solid #000; border-radius: 14px;
  box-shadow: 0 10px 24px rgba(0,0,0,0.45);
  z-index: 6;
  backdrop-filter: blur(2px);
}
.shop-title { color: #fff; margin: 0 0 12px 0; font-size: 18px; text-shadow: 2px 2px 0 #000; }
.shop-tabs { display: grid; grid-template-columns: 1fr 1fr; margin: 0 0 12px 0; border: 1px solid #000; border-radius: 12px; overflow: hidden; background: rgba(0,0,0,0.25); box-shadow: inset 1px 1px 0 rgba(255,255,255,0.2), inset -1px -1px 0 rgba(0,0,0,0.6); }
.shop-tab { appearance: none; border: none; border-right: 1px solid #000; padding: 12px 18px; background: transparent; color: #eee; text-shadow: 1px 1px 0 #000; cursor: pointer; display: inline-flex; align-items: center; justify-content: center; gap: 10px; font-size: 18px; }
.shop-tab:last-child { border-right: 0; }
.shop-tab.active { background: rgba(0,0,0,0.35); color: #fff; }
.shop-tab-icon { width: 24px; height: 24px; image-rendering: pixelated; border: none; border-radius: 0; }
.shop-list { display: grid; grid-auto-rows: minmax(48px, auto); gap: 10px; padding-right: 14px; }
/* Two-row grid so status text sits under the title while cost+button stay aligned right */
.shop-item { display: grid; grid-template-columns: 1fr auto auto; grid-template-rows: auto auto; grid-template-areas: 'name cost btn' 'status cost btn'; align-items: center; gap: 6px 12px; background: rgba(0,0,0,0.25); padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.6); }
.shop-item-name { grid-area: name; color: #fff; text-shadow: 2px 2px 0 #000; font-size: 16px; }
.shop-item-status { grid-area: status; color: #ddd; font-size: 13px; }
.shop-status-purchased { color: #6cc642; }
.shop-cost { grid-area: cost; display: inline-flex; align-items: center; gap: 8px; background: rgba(0,0,0,0.35); padding: 4px 8px; border-radius: 8px; border: 1px solid rgba(0,0,0,0.55); }
.shop-cost .shop-chip-img { border: none; border-radius: 0; box-shadow: none; }
.shop-item .ui-btn-narrow { grid-area: btn; }
.shop-item .ui-btn, .shop-btns .ui-btn { margin-top: 0; margin-bottom: 0; }
.shop-btns { grid-area: btn; display: flex; gap: 8px; align-items: center; }
.shop-btns .ui-btn-narrow { grid-area: auto; }
.shop-item-trade > .shop-cost { display: none; }
.shop-trade { display: flex; align-items: center; gap: 10px; }
.shop-trade-arrow { color: #ddd; text-shadow: 1px 1px 0 #000; font-size: 18px; }
.shop-btn-wrap { grid-area: btn; position: relative; height: 100%; display: flex; align-items: center; justify-content: flex-end; }
.shop-btn-shield { position: absolute; inset: 0; z-index: 2; background: rgba(0,0,0,0); cursor: not-allowed; }
.shop-chip-img { width: 22px; height: 22px; object-fit: cover; image-rendering: pixelated; border: 1px solid #000; border-radius: 4px; box-shadow: inset 1px 1px 0 rgba(255,255,255,0.3), inset -1px -1px 0 rgba(0,0,0,0.5); }
.shop-chip-text { color: #eee; text-shadow: 1px 1px 0 #000; font-size: 14px; }
.shop-menu { position: absolute; inset: 16px 16px 92px 16px; overflow-y: auto; overflow-x: hidden; }
.shop-cancel { position: absolute; right: 16px; bottom: 16px; }
.shop-menu { scrollbar-width: thin; scrollbar-color: #6d6d6d #1d1d1d; }
/* Minecraft-like pixelated scrollbar (WebKit/Blink) */
.shop-menu::-webkit-scrollbar { width: 14px; height: 14px; }
.shop-menu::-webkit-scrollbar-track {
  background:
    repeating-linear-gradient(
      0deg,
      #1d1d1d 0, #1d1d1d 6px,
      #232323 6px, #232323 12px
    );
  border-left: 2px solid #000;
}
.shop-menu::-webkit-scrollbar-thumb {
  background:
    linear-gradient(180deg, rgba(255,255,255,0.18), rgba(0,0,0,0.18)),
    repeating-linear-gradient(
      0deg,
      #6f6f6f 0, #6f6f6f 6px,
      #5b5b5b 6px, #5b5b5b 12px
    );
  border: 2px solid #000;
  border-right-width: 1px;
  border-left-width: 1px;
  box-shadow: inset 1px 1px 0 rgba(255,255,255,0.25), inset -1px -1px 0 rgba(0,0,0,0.5);
}
/* Corners & buttons kept square for the blocky look */
.shop-menu::-webkit-scrollbar-corner { background: #1d1d1d; }
.shop-menu::-webkit-scrollbar-button { display: none; }
.shop-title { color: #fff; margin: 0 0 12px 0; font-size: 18px; text-shadow: 2px 2px 0 #000; }
.shop-list { display: grid; grid-auto-rows: minmax(48px, auto); gap: 10px; padding-right: 14px; }
.shop-item { display: grid; grid-template-columns: 1fr auto auto; grid-template-rows: auto auto; grid-template-areas: 'name cost btn' 'status cost btn'; align-items: center; gap: 6px 12px; background: rgba(0,0,0,0.25); padding: 10px 12px; border-radius: 10px; border: 1px solid rgba(0,0,0,0.6); }
.shop-item-name { grid-area: name; color: #fff; text-shadow: 2px 2px 0 #000; font-size: 16px; }
.shop-item-status { grid-area: status; color: #ddd; font-size: 13px; }
.shop-status-purchased { color: #6cc642; }
.shop-cost { grid-area: cost; display: inline-flex; align-items: center; gap: 8px; background: rgba(0,0,0,0.35); padding: 4px 8px; border-radius: 8px; border: 1px solid rgba(0,0,0,0.55); }
.shop-cost .shop-chip-img { border: none; border-radius: 0; box-shadow: none; }
.shop-item .ui-btn-narrow { grid-area: btn; }
.shop-item .ui-btn, .shop-btns .ui-btn { margin-top: 0; margin-bottom: 0; }
.shop-btns { grid-area: btn; display: flex; gap: 8px; align-items: center; }
.shop-btns .ui-btn-narrow { grid-area: auto; }
.shop-item-trade > .shop-cost { display: none; }
.shop-trade { display: flex; align-items: center; gap: 10px; }
.shop-trade-arrow { color: #ddd; text-shadow: 1px 1px 0 #000; font-size: 18px; }
.shop-btn-wrap { grid-area: btn; position: relative; height: 100%; display: flex; align-items: center; justify-content: flex-end; }
.shop-btn-shield { position: absolute; inset: 0; z-index: 2; background: rgba(0,0,0,0); cursor: not-allowed; }
.shop-chip-img { width: 22px; height: 22px; object-fit: cover; image-rendering: pixelated; border: 1px solid #000; border-radius: 4px; box-shadow: inset 1px 1px 0 rgba(255,255,255,0.3), inset -1px -1px 0 rgba(0,0,0,0.5); }
.shop-chip-text { color: #eee; text-shadow: 1px 1px 0 #000; font-size: 14px; }
.shop-inv { display: flex; flex-wrap: wrap; gap: 10px; margin-top: 6px; }
.shop-inventory { display: block !important; background: transparent; border: none; padding: 0; }
.shop-item-title { color: #fff; text-shadow: 2px 2px 0 #000; font-size: 16px; margin-bottom: 6px; }

/* Inventory modal (separate from Trading Outpost modal) */
.shop-inventory-modal {
  position: absolute; top: 24px; left: 24px; z-index: 7;
  background: rgba(28,28,28,0.55);
  border: 2px solid #000; border-radius: 14px; padding: 12px;
  box-shadow: 0 10px 24px rgba(0,0,0,0.45);
  max-width: min(520px, 44vw);
}
/* Remove borders/rounding on the item images inside the inventory modal */
.shop-inventory-modal .shop-chip-img { border: none; border-radius: 0; box-shadow: none; }

/* Debug reset button in Shop */
.shop-debug { position: absolute; left: 24px; bottom: 24px; z-index: 7; }

/* Options page */
.opt-root { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; }
.opt-panel { position: relative; width: min(720px, 60vw); background: rgba(28,28,28,0.55); border: 2px solid #000; border-radius: 14px; box-shadow: 0 10px 24px rgba(0,0,0,0.45); padding: 16px; }
.opt-grid { display: grid; grid-template-columns: 1fr; gap: 18px; }
.opt-grid-2 { grid-template-columns: 1fr 1fr; row-gap: 80px; column-gap: 14px; }
.opt-cell { background: transparent; border: none; border-radius: 0; padding: 0; display: flex; align-items: center; justify-content: center; }
.opt-cell .ui-btn { width: 100%; min-width: 0; }
.opt-done { display: block; margin: 80px auto 0; }
.opt-label { color: #fff; text-shadow: 1px 1px 0 #000; min-width: 160px; }
.opt-slider { position: relative; width: 100%; height: 40px; background: linear-gradient(#2e2e2e,#1f1f1f); border: 1px solid #000; border-radius: 0; box-shadow: inset 1px 1px 0 rgba(255,255,255,0.2), inset -1px -1px 0 rgba(0,0,0,0.6); overflow: hidden; }
.opt-slider-label { position: absolute; inset: 0; display: flex; align-items: center; justify-content: center; color: #fff; text-shadow: 1px 1px 0 #000; pointer-events: none; font-size: 16px; }
.opt-range { position: absolute; inset: 1px; width: auto; height: auto; -webkit-appearance: none; appearance: none; background: transparent; }
/* Track */
.opt-range::-webkit-slider-runnable-track { height: 100%; background: transparent; }
.opt-range::-moz-range-track { height: 100%; background: transparent; }
/* Thumb */
.opt-range::-webkit-slider-thumb { -webkit-appearance: none; width: 20px; height: 100%; margin: 0; background: linear-gradient(#a6a6a6,#7b7b7b); border: 1px solid #000; border-radius: 0; box-shadow: inset 1px 1px 0 #dcdcdc, inset -1px -1px 0 #575757; box-sizing: border-box; }
.opt-range::-moz-range-thumb { width: 20px; height: 100%; background: linear-gradient(#a6a6a6,#7b7b7b); border: 1px solid #000; border-radius: 0; box-shadow: inset 1px 1px 0 #dcdcdc, inset -1px -1px 0 #575757; box-sizing: border-box; }
.shop-inv-chip { display: inline-flex; align-items: center; gap: 8px; background: rgba(0,0,0,0.25); padding: 6px 10px; border-radius: 8px; border: 1px solid rgba(0,0,0,0.55); }

/* Tetromino preview gallery */
.mp-tetro-gallery { position: relative; z-index: 4; display: flex; flex-wrap: wrap; gap: 12px; justify-content: center; margin: 0 auto; width: min(880px, 92vw); }

/* Falling overlay on sides (non-interactive) */
.mp-fall-overlay { position: absolute; inset: 0; pointer-events: none; z-index: 2; overflow: hidden; }
.mp-fall-lane { position: absolute; top: 0; bottom: 0; left: 0; right: 0; }
.mp-fall-item { position: absolute; will-change: transform; }

/* ---------------- Create Game styles ---------------- */
.gc-table { display: grid; grid-template-columns: 64px 1fr 180px 1.4fr; align-items: center; padding: 8px 12px; gap: 12px; }
.gc-header { color: #ddd; text-shadow: 2px 2px 0 #000; font-size: 14px; }
.gc-table + .gc-table { border-top: 1px solid rgba(0,0,0,0.5); }
.gc-cell { color: #fff; text-shadow: 2px 2px 0 #000; }
.gc-icon { display: flex; align-items: center; justify-content: center; }
.gc-name { font-size: 16px; }
.gc-max { color: #c0ffb4; }
.gc-prob-row { display: flex; align-items: center; gap: 10px; }
.gc-prob-row input[type="range"] {
  width: 100%;
  accent-color: #9fcf63;
  position: relative;
  background: transparent;
  appearance: none;
  -webkit-appearance: none;
  height: 22px;
}

/* Track with gray limit marker overlay; thumb remains above */
.gc-prob-row input[type="range"]::-webkit-slider-runnable-track {
  height: 10px;
  border-radius: 6px;
  background:
    /* limit marker on top */
    linear-gradient(to right, transparent var(--gc-marker), #9a9a9a var(--gc-marker), #9a9a9a calc(var(--gc-marker) + 2px), transparent calc(var(--gc-marker) + 2px)),
    /* filled value left of thumb */
    linear-gradient(to right, #9fcf63 0%, #9fcf63 var(--gc-value), transparent var(--gc-value), transparent 100%),
    /* base track */
    linear-gradient(180deg, #5a5a5a, #2f2f2f);
}
.gc-prob-row input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  width: 16px; height: 16px; border-radius: 50%;
  background: #9fcf63; border: 2px solid #6ea33a;
  margin-top: -3px; /* center on 10px track */
  position: relative; z-index: 2;
}

/* Firefox track */
.gc-prob-row input[type="range"]::-moz-range-track {
  height: 10px; border-radius: 6px;
  background:
    linear-gradient(to right, transparent var(--gc-marker), #9a9a9a var(--gc-marker), #9a9a9a calc(var(--gc-marker) + 2px), transparent calc(var(--gc-marker) + 2px)),
    linear-gradient(to right, #9fcf63 0%, #9fcf63 var(--gc-value), transparent var(--gc-value), transparent 100%),
    linear-gradient(180deg, #5a5a5a, #2f2f2f);
}
.gc-prob-row input[type="range"]::-moz-range-thumb {
  width: 16px; height: 16px; border-radius: 50%;
  background: #9fcf63; border: 2px solid #6ea33a;
  position: relative; z-index: 2;
}
.gc-prob-val { width: 54px; text-align: right; }
/* Slider with visual cap indication */
.gc-slider { position: relative; width: 100%; }
.gc-slider .gc-cap { position: absolute; top: 6px; bottom: 6px; right: 0; background: rgba(0,0,0,0.45); pointer-events: none; border-radius: 4px; }
/* Marker is rendered via input background gradient; no extra element needed */

/* Icons now use Three.js SpinningCube; removed CSS 3D cube and tints */

/* Distribution bar (XP-like) */
.gc-dist-wrap { margin: 14px 12px 0 12px; }
.gc-dist-row { display: flex; align-items: center; gap: 10px; }
.gc-auto { color: #ddd; text-shadow: 2px 2px 0 #000; font-size: 12px; user-select: none; }
.gc-auto input { vertical-align: middle; margin-right: 6px; }
.gc-dist { position: relative; flex: 1 1 auto; height: 13px; display: flex; border: 2px solid #000; box-shadow: inset 1px 1px 0 rgba(255,255,255,0.35), inset -1px -1px 0 rgba(0,0,0,0.65); background: #222; overflow: hidden; border-radius: 9px; }
.gc-dist::after { /* 20 visual sections */
  content: ''; position: absolute; inset: 0; pointer-events: none;
  background: repeating-linear-gradient(to right,
    transparent 0, transparent calc(5% - 1px), rgba(0,0,0,0.55) calc(5% - 1px), rgba(0,0,0,0.55) 5%);
}
.gc-seg { height: 100%; background-size: auto 100%; background-repeat: repeat; background-position: center; image-rendering: pixelated; }
.gc-empty { background: linear-gradient(90deg, #333 0%, #222 100%); }
.gc-dist-legend { color: #ddd; text-shadow: 2px 2px 0 #000; font-size: 12px; margin-top: 6px; }
